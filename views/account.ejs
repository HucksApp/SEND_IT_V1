<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta http-equiv="content-type" content="text/html" ;charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" >
    <title><img src="">Account</title>
    <style>
      article{
        background-attachment: fixed;
          background-image:url('/icons/chuttersnap-xewrfLD8emE-unsplash.jpg');
        box-sizing: border-box;
        font-family: fantasy;
      }
      /***for partial nav**/
      nav{
        color:#fff;
        font-size: 1.1em;
        background-color:#000;
      display:flex;
      position: fixed;
      z-index: 1;
      text-align: center;
      justify-content:space-around;
      width: 100%;
      font-weight: bold;
      color:#fff;
      }
      nav.open{
        display:flex;
      }

      nav>*{
        flex:1;
        display:flex;
        border-width:thin;
        justify-content:center;
        align-items: center;
        align-self: center;
        border-color:rgba(255,255,255, 0.2);
        border-style: solid;
        display:inline-block;
        border-right:hidden;

      }
      nav a:hover{
        border:solid thin purple;
      }



      nav span{
        border:hidden;
      }
      nav p a{
        display: flex;
        align-items: center;
        justify-content: center;
      }




      .user_nav {
        margin-left:30%;
        margin-right:0;

      }
      .user_nav div{
        padding:0;
      }

      nav div p:hover{
        border-bottom: solid #0a0;
      }
      a{
        text-decoration: none;
        color:#fff;

      }
      a{
        border:
      }

      /**************************/


            .acc_wrapper{
              background-color: rgba(219,225,221, 0.8);
              text-transform:capitalize;
              border:solid rgba(255, 255, 255, 0.5);
              border-radius:7px;
              color:#000;
              padding:5% 10%;
              font-size:1.3em;
              margin: 0% 10%;

            }
      section#body-wraper{
        margin:10%;
      }

      .acc_wrapper span{
        font-size: 0.7em;
        color:purple;
        font-weight: bold;
        margin-left: 13%;
        text-align: center;
        width:100%;
      }

      .nav{
        display:flex;
        justify-content:space-between;
        color:#fff;

      }
      nav h4:first-child{
        padding-left: 50%;

      }

      nav h4:last-child{
        padding-right: 20%;
      }
      nav h4>*{
        display:inline;
      }


      nav h4 p:hover{
        border-bottom: solid #0f0;
      }
      /*********footer design************/

      footer{
        display:flex;
        background-color: #000;
        justify-content: space-around;
        font-family: inherit;
        color:#fff;
        height: 20vh;
      }

      footer div{
        border: solid thin rgba(255,255,255, 0.2);
        flex:1;
        display:flex;
        justify-content: center;
        align-items: center;

      }


      footer div:hover{
        transform:scale(0.9, 0.9);
        cursor: pointer;
        border: solid thin purple;

      }

      .footer{
        text-align: center;
        color:purple;
        background-color: #000;
        height: 15vh;
        vertical-align: bottom;
      }

      /***********************/
      button:hover{
        cursor:pointer;
        background-color:#f00
      }

      .acc_wrapper  div p+div{
        background-color: rgba(255, 255, 255, 0.5);
        border:solid rgba(255, 255, 255, 0.6);
        display:flex;
      }

       a{
         text-decoration: none;
       }

       @media screen and (max-width:465px){
        nav{
     flex-direction: column;
  }
      nav>*{
    margin:4px;
    border:thin solid rgba(255,255,255, 0.2);
    width:90%;
  
    }  
    .acc_wrapper{
      padding-top:200px;
    }
       }   

    </style>
    <!--<link href="profile.css" rel="stylesheet" type="text/css"/>-->
  </head>

  <body>
    <% include partials/nav %>


    <article>
    <!--inject data into the span_tag from sign up-->
    <aside class="acc_wrapper">
      <div>
        <p>name</p>
        <div class='username'>
          <%if (user){%>
        <%if(user.username) {%><span class="val"><%=user.username%></span>
        <%}else if (user.displayName){%><span><%=user.displayName%></span><%}else{%>
          <span>empty</span><%}%>
          <button>i</button>
      </div>
      </div>
      <div>
        <p>address</p>
        <div class='address'>
          <%if(user.address) {%><span class="val"><%=user.address%></span>
          <%}else {%><span>empty</span><%}%>
            <button alt="edit" >i</button>
      </div>
      </div>
      <div>
        <p>email</p>
        <div class='email'>
          <%if(user.email) {%><span class="val"><%=user.email%></span>
          <%}else {%><span>empty</span><%}%>
      </div>
      </div>
      <div>
        <p>phone number </p>
        <div class='phoneno'>
          <%if(user.phoneno) {%><span class="val"><%=user.phoneno%></span>
          <%}else {%><span>empty</span><%}%>
            <button>i</button>
      </div>
      </div>
      <div>
        <p>password</p>
        <div class='password'>
          <%if(user.password) {%><span class="val"><%=user.password%></span>
          <%}else {%><span>empty</span></div><%}%>
            <button>i</button>
            <%}%>
      </div>
      </div>
      <div >
        <p>orders</p>
        <span><a href="/profile">ORDERS</a></span>
      </div>
    </aside>
    </section>

  </article>
  <%include partials/socials%>
  <script>
      //get dom elements
      const edits = document.getElementsByTagName('button');
      let classVal;


    function replaceVal(classVal,e){
      const contxt = document.getElementById('u').value;
      let data = {
                contxt : contxt,
                classVal : classVal
      };
      
          fetch('/updateUser',{

                              method:'POST',
                              body:JSON.stringify(data),
                              headers:{
                                    "Accept":"*/*",
                                    "Content-Type":"application/json"
                              }

               })
              .then()
              .catch(err=>location.reload());     
              e.target.parentNode.firstElementChild.innerHTML=`<span class="val">${contxt}</span>`;
    };

    function allowEdit(e){
      e.stopPropagation();
      if(this.className =="openNow"){
        replaceVal(classVal,e)
      }else{
      classVal=this.parentNode.classList.value.toLowerCase();
      e.target.className='openNow';
      this.parentNode.firstElementChild.innerHTML="<input id='u' type='text' style='width:70%; font-weight:bolder; border:hidden'>"
    }
  }
    



      [...edits].forEach((edit)=>{
    edit.addEventListener('click',allowEdit)
      })
      



</script>
</body>
</html>
